"use strict";(self["webpackChunkchat"]=self["webpackChunkchat"]||[]).push([[443],{4242:function(t,e,i){i.r(e),i.d(e,{default:function(){return r}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"blog-list"},[e("el-page-header",{attrs:{content:"详情页面"},on:{back:t.goBack}}),e("div",{staticClass:"blog-detail"},[e("h2",{staticClass:"blog-title"},[t._v(t._s(t.selectedArticle.title))]),e("img",{staticClass:"blog-image",attrs:{src:t.selectedArticle.image,alt:""}}),e("div",{staticClass:"blog-content",domProps:{innerHTML:t._s(t.selectedArticle.content)}}),e("div",{staticClass:"blog-actions"},[e("button",{on:{click:function(e){return t.toggleLikeStatus(t.selectedArticle.id,"like")}}},[e("span",[t._v("点赞 "+t._s(t.selectedArticle.likes))])]),e("button",{on:{click:function(e){return t.toggleLikeStatus(t.selectedArticle.id,"dislike")}}},[e("span",[t._v("踩踏 "+t._s(t.selectedArticle.dislikes))])])])])],1)},l=[],c={data(){return{articles:[],selectedArticle:{title:"",introduction:"",content:""}}},created(){const t=this.$route.params.id;this.fetchNewsDetails(t)},methods:{fetchNewsDetails(t){this.$http.get(`http://yun.naav.cn/blog/api/index.php?action=details&id=${t}`).then((t=>{this.selectedArticle=t.data.article})).catch((t=>{console.error(t)}))},goBack(){this.$router.go(-1)},likeArticle(t){this.toggleLikeStatus(t,"like")},dislikeArticle(t){this.toggleLikeStatus(t,"dislike")},toggleLikeStatus(t,e){const i=this.articles.find((e=>e.id===t)),s=i.hasLiked,l=i.hasDisliked;if(s&&"like"===e)return;if(l&&"dislike"===e)return;const c="like"===e?"hasLiked":"hasDisliked",a="like"===e?"hasDisliked":"hasLiked",n="like"===e?"dislike":"like";this.$http.post("http://yun.naav.cn/blog/api/index.php?action=vote",{id:t,voteType:e}).then((()=>{i[c]=!s||!l,i[a]=!1,i[e+"s"]++,(s||l)&&i[n+"s"]--})).catch((t=>{console.log(t)}))}}},a=c,n=i(1001),o=(0,n.Z)(a,s,l,!1,null,"77f679aa",null),r=o.exports}}]);